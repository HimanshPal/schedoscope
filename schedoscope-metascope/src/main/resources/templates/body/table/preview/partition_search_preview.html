<!-- /**
 * Copyright 2017 Otto (GmbH & Co KG)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */  -->

<div data-th-fragment="partition(obj)">
    <div th:with="partition=${obj.resultEntity}">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-md-12">
                        <a
                                th:href="'table?fqdn=' + ${partition.table.fqdn} + '&amp;partitionPage=' + ${urlService.getPartitionPage(partition.table.fqdn, partition.internalViewId())}
            	+ '#partitionsContent-' + ${partition.internalViewId()}"
                                th:text="${!partition.parameters.isEmpty()} ?
               ${partition.viewUrl} + ' (' + ${partition.parameterString} + ')' :
               ${partition.viewUrl}"></a>
                        <span style="padding-left: 10px;"
                              data-th-text="'Found ' + ${obj.getSize()} + ' match(es)'"></span>
                        <span th:attr="data-qualifier=${partition.viewUrl}" class="loader statusentity pull-right" title="Loading view status ..."></span>
                    </div>
                </div>
            </div>
            <table id="partitionPreviewTable" class="table table-reflow">
                <div th:with="e=${obj.highlightings.get('tableName')}">
                    <tr style="border-bottom: 1px solid lightgrey;" data-th-if="${e != null and !e.isEmpty()}">
                        <td width="20%"><b data-th-text="'Table'"></b></td>
                        <td width="80%"><span th:utext="${e}"></span></td>
                    </tr>
                </div>
                <div th:with="e=${obj.highlightings.get('databaseName')}">
                    <tr style="border-bottom: 1px solid lightgrey;" data-th-if="${e != null and !e.isEmpty()}">
                        <td width="20%"><b data-th-text="'Database'"></b></td>
                        <td width="80%"><span th:utext="${e}"></span></td>
                    </tr>
                </div>
                <div th:with="e=${obj.highlightings.get('parameterString')}">
                    <tr style="border-bottom: 1px solid lightgrey;" data-th-if="${e != null and !e.isEmpty()}">
                        <td width="20%"><b data-th-text="'Parameters'"></b></td>
                        <td width="80%"><span th:utext="${e}"></span></td>
                    </tr>
                </div>
            </table>
        </div>
    </div>
</div>
